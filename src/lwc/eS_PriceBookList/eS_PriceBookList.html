<!--suppress ALL -->
<template>
    <lightning-card title="Price Book List" icon-name="utility:picklist_type">
        <div class="slds-card__body_inner">
            <lightning-button
                    label="Add new Price Book"
                    onclick={openModal}
                    icon-position="right">
            </lightning-button>

            <template if:true={pricebooks.data}>
                <lightning-layout multiple-rows="true" pull-to-boundary="small">
                    <template for:each={pricebooks.data} for:item="pricebook">
                        <lightning-layout-item key={pricebook.id} size="3" class="slds-var-p-around_x-small">
                            <c-e-s_-price-book-tile pricebook={pricebook}></c-e-s_-price-book-tile>
                        </lightning-layout-item>
                    </template>
                </lightning-layout>
            </template>

            <template if:true={isModalOpen}>
                <section role="dialog" tabindex="-1" aria-label="Meaningful description of the modal content"
                         aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container modal-window">
                        <header class="slds-modal__header">
                            <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Create new Price
                                Book</h2>
                        </header>
                        <div class="slds-modal__content">
                            <div class="slds-p-horizontal_medium slds-p-top_medium">
                                <lightning-layout>
                                    <lightning-layout-item>
                                        <div class="slds-form-element slds-p-around_small">
<!--                                            todo change this -->
                                            <label class="slds-form-element__label" for="text-input-id-47a">
                                                <abbr class="slds-required" title="required">* </abbr>Price Book name</label>
                                            <div class="slds-form-element__control">
                                                <input type="text" id="text-input-id-47a" placeholder="Enter new Price Book name..." required class="slds-input" />
                                            </div>
                                        </div>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <div class="slds-p-around_small">
                                            <lightning-file-upload
                                                    label="Attach image"
                                                    name="fileUploader"
                                                    accept=".png, .jpg, .jpeg"
                                                    record-id={myRecordId}

                                                    multiple>
                                            </lightning-file-upload>
                                        </div>
                                    </lightning-layout-item>
                                </lightning-layout>
                                <lightning-layout class="slds-p-vertical_small" horizontal-align="end">
<!--                                    <lightning-layout-item>-->
<!--                                        <select class="slds-select" name="optionSelect" onchange={changeHandler}>-->
<!--                                            <option value="decrease"> decrease </option>-->
<!--                                            <option value="increase"> increase </option>-->
<!--                                        </select>-->
<!--                                    </lightning-layout-item>-->
                                    <lightning-layout-item>
                                        <lightning-input type="number" name="priceValue" variant="label-hidden" placeholder="Enter value ..." onchange={changePriceHandler}></lightning-input>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <select class="slds-select" name="optionUnitSelect"
                                                onchange={changeUnitHandler}>
                                            <option value="precent"> %</option>
                                            <option value="amount"> PLN</option>
                                        </select>
                                    </lightning-layout-item>
                                    <lightning-layout-item>
                                        <lightning-button class="slds-p-left_small" onclick={handleclick}
                                                          value="Change Price"
                                                          label="Change Price"></lightning-button>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </div>
                            <div style="height: 300px;">
                                <lightning-datatable
                                        key-field="id"
                                        data={records}
                                        columns={columns}>
                                </lightning-datatable>
                            </div>
                        </div>
                        <footer class="slds-modal__footer">
                            <lightning-button
                                    label="Close"
                                    onclick={closeModal}>
                            </lightning-button>
                            <lightning-button
                                    label="Save"
                                    variant="brand"
                                    onclick={saveNewPricebook}>
                            </lightning-button>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </template>

            <template if:true={pricebooks.error}>
                <div class="slds-text-color_error">
                    An error occurred while loading the list
                </div>
            </template>
        </div>
    </lightning-card>
</template>